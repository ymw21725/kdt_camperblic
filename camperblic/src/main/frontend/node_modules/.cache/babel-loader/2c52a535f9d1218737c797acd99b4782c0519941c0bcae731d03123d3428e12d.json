{"ast":null,"code":"import _defineProperty from\"/Users/ethan/Documents/codream_final/camperblic/src/main/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/ethan/Documents/codream_final/camperblic/src/main/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/ethan/Documents/codream_final/camperblic/src/main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import'../../styles/loginStyles/Login.css';import{useNavigate}from'react-router-dom';import{Link}from'react-router-dom';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var history=useNavigate();var _useState=useState({userid:'',password:''}),_useState2=_slicedToArray(_useState,2),loginForm=_useState2[0],setLoginForm=_useState2[1];useEffect(function(){if(sessionStorage.getItem(\"username\")!=null){history(\"/\");}},[]);var handleInputChange=function handleInputChange(e){setLoginForm(_objectSpread(_objectSpread({},loginForm),{},_defineProperty({},e.target.name,e.target.value)));};var LoginBtn=function LoginBtn(e){e.preventDefault();axios.post('/login',loginForm,{withCredentials:true}).then(function(response){// 로그인 성공 시 홈으로 이동\nif(response.status===200){console.log(response.data.message);var _username=response.data.username;var userId=response.data.userId;sessionStorage.setItem(\"username\",_username);sessionStorage.setItem(\"userId\",userId);window.location.href=\"/\";alert('로그인 성공');}}).catch(function(error){if(error.response.status===404){console.error(error);alert(\"사용자를 찾을 수 없습니다.\");}else if(error.response.status===401){alert(\"사용자를 찾을 수 없습니다.\");}else if(error.response.status===406){alert(\"비밀번호가 일치하지 않습니다.\");}else{console.error(error.response.data);}});};// 세션에 사용자 이름이 있다면 마이페이지로 이동하는 함수\nvar username=sessionStorage.getItem(\"username\");var goToMyPage=function goToMyPage(){if(username){history(\"/mypage/\".concat(username));// 마이페이지 경로로 이동\n}else{alert(\"세션에 사용자 이름이 없습니다.\");}};return/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"loginMainDiv\",children:/*#__PURE__*/_jsxs(\"div\",{className:'loginFormDiv',children:[/*#__PURE__*/_jsx(\"h1\",{className:'loginH1',children:\"CAMPERBLIC.\"}),/*#__PURE__*/_jsxs(\"div\",{className:'borderDiv',children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:LoginBtn,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputMainDiv\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"아이디\",name:\"userid\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"비밀번호\",name:\"password\",onChange:handleInputChange})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:'loginBtn',children:\"\\uB85C\\uADF8\\uC778\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:'linkTODiv',children:[/*#__PURE__*/_jsx(Link,{to:\"/findaccount\",className:'linkTo',children:\" \\uC544\\uC774\\uB514 \\uCC3E\\uAE30 \"}),/*#__PURE__*/_jsx(Link,{to:\"/findpassword\",className:'linkTo',children:\"\\uBE44\\uBC00\\uBC88\\uD638 \\uCC3E\\uAE30 \"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\" \\uD68C\\uC6D0\\uAC00\\uC785\"})]}),username&&/*#__PURE__*/_jsx(\"button\",{onClick:goToMyPage,children:\"\\uB9C8\\uC774\\uD398\\uC774\\uC9C0\"}),\" \"]})]})})});};export default Login;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Link","axios","jsx","_jsx","jsxs","_jsxs","Login","history","_useState","userid","password","_useState2","_slicedToArray","loginForm","setLoginForm","sessionStorage","getItem","handleInputChange","e","_objectSpread","_defineProperty","target","name","value","LoginBtn","preventDefault","post","withCredentials","then","response","status","console","log","data","message","username","userId","setItem","window","location","href","alert","catch","error","goToMyPage","concat","children","className","onSubmit","type","placeholder","onChange","to","onClick"],"sources":["/Users/ethan/Documents/codream_final/camperblic/src/main/frontend/src/pages/login/Login.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport '../../styles/loginStyles/Login.css';\r\nimport {useNavigate} from 'react-router-dom';\r\nimport {Link} from 'react-router-dom';\r\nimport axios from \"axios\";\r\n\r\ninterface LoginFrom {\r\n    userid: string,\r\n    password: string,\r\n}\r\n\r\n\r\nconst Login = () => {\r\n    const history = useNavigate();\r\n    const [loginForm, setLoginForm] = useState<LoginFrom>({\r\n        userid: '',\r\n        password: '',\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (sessionStorage.getItem(\"username\") != null) {\r\n            history(\"/\");\r\n        }\r\n    }, [])\r\n\r\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setLoginForm({...loginForm, [e.target.name]: e.target.value});\r\n    };\r\n\r\n    const LoginBtn = (e: React.FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault();\r\n        axios.post('/login', loginForm, {withCredentials: true})\r\n            .then((response) => {\r\n                // 로그인 성공 시 홈으로 이동\r\n                if (response.status === 200) {\r\n                    console.log(response.data.message);\r\n                    const username = response.data.username;\r\n                    const userId = response.data.userId;\r\n                    sessionStorage.setItem(\"username\", username);\r\n                    sessionStorage.setItem(\"userId\", userId);\r\n                    window.location.href = \"/\";\r\n                    alert('로그인 성공');\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                if (error.response.status === 404) {\r\n                    console.error(error);\r\n                    alert(\"사용자를 찾을 수 없습니다.\");\r\n                } else if (error.response.status === 401) {\r\n                    alert(\"사용자를 찾을 수 없습니다.\");\r\n                }else if(error.response.status === 406){\r\n                    alert(\"비밀번호가 일치하지 않습니다.\");\r\n                } else {\r\n                    console.error(error.response.data);\r\n\r\n                }\r\n            });\r\n    };\r\n\r\n    // 세션에 사용자 이름이 있다면 마이페이지로 이동하는 함수\r\n    const username = sessionStorage.getItem(\"username\");\r\n    const goToMyPage = () => {\r\n        if (username) {\r\n            history(`/mypage/${username}`); // 마이페이지 경로로 이동\r\n        } else {\r\n            alert(\"세션에 사용자 이름이 없습니다.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <section>\r\n            <div className={\"loginMainDiv\"}>\r\n                <div className={'loginFormDiv'}>\r\n                    <h1 className={'loginH1'}>CAMPERBLIC.</h1>\r\n                    <div className={'borderDiv'}>\r\n                        <form onSubmit={LoginBtn}>\r\n                            <div className={\"inputMainDiv\"}>\r\n                                <input type={\"text\"} placeholder={\"아이디\"} name={\"userid\"} onChange={handleInputChange}/>\r\n                                <input type={\"password\"} placeholder={\"비밀번호\"} name={\"password\"}\r\n                                       onChange={handleInputChange}/>\r\n                            </div>\r\n                            <div>\r\n                                <button className={'loginBtn'}>로그인</button>\r\n                            </div>\r\n                        </form>\r\n                        <div className={'linkTODiv'}>\r\n                            <Link to='/findaccount' className={'linkTo'}> 아이디 찾기 </Link>\r\n                            <Link to='/findpassword' className={'linkTo'}>비밀번호 찾기 </Link>\r\n                            <Link to='/signup'> 회원가입</Link>\r\n                        </div>\r\n\r\n                        {username && <button onClick={goToMyPage}>마이페이지</button>} {/* 세션에 사용자 이름이 있을 경우에만 버튼 표시 */}\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}