{"ast":null,"code":"var _jsxFileName = \"/Users/ethan/Documents/codream_final/camperblic/src/main/frontend/src/pages/login/MyPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport RenderUserInformation from './RenderUserInformation';\nimport { Simulate } from \"react-dom/test-utils\";\nvar error = Simulate.error;\nimport OrderList from \"./OrderList\";\nimport \"../../styles/loginStyles/MyPage.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MyPage = () => {\n  _s();\n  const history = useNavigate();\n  const [user, setUser] = useState({\n    userid: \"\",\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    address1: \"\",\n    address2: \"\",\n    address3: \"\",\n    address4: \"\",\n    createdDate: \"\"\n  });\n  const [orders, setOrders] = useState([]);\n  const [isUser, setIsUser] = useState(false);\n  const [isUserOrder, setIsUserOrder] = useState(false);\n  useEffect(() => {\n    // 유저 정보를 가져오는 API 호출\n    axios.get('/mypage', {\n      withCredentials: true\n    }).then(response => {\n      if (response.status === 200) {\n        const {\n          member,\n          orders\n        } = response.data;\n        setUser(member);\n        setOrders(orders);\n        sessionStorage.setItem(\"username\", member.name);\n        if (member != null) {\n          setIsUser(true);\n        }\n        if (orders.length > 0) {\n          setIsUserOrder(true);\n        }\n      }\n    }).catch(error => {\n      if (error.response.status === 500) {\n        alert(\"서버에 문제가 있습니다. 잠시만 기다려주세요.\");\n        console.log(error.response.data);\n        history(\"/\");\n      } else if (error.response.status === 423) {\n        sessionStorage.clear();\n        alert(\"사용자를 찾지 못했습니다. 로그인 상태를 확인해주세요.\");\n        history(\"/login\");\n      }\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mypageMainDiv\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"myPageComDiv\",\n        children: [isUser && /*#__PURE__*/_jsxDEV(RenderUserInformation, {\n          user: user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 32\n        }, this), isUserOrder && /*#__PURE__*/_jsxDEV(OrderList, {\n          orders: orders\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 37\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n};\n_s(MyPage, \"fid+alWd3th4/Uq26q4Av6pfmXY=\", false, function () {\n  return [useNavigate];\n});\n_c = MyPage;\nexport default MyPage;\nvar _c;\n$RefreshReg$(_c, \"MyPage\");","map":{"version":3,"names":["React","useEffect","useState","axios","RenderUserInformation","Simulate","error","OrderList","useNavigate","jsxDEV","_jsxDEV","MyPage","_s","history","user","setUser","userid","name","email","phone","address1","address2","address3","address4","createdDate","orders","setOrders","isUser","setIsUser","isUserOrder","setIsUserOrder","get","withCredentials","then","response","status","member","data","sessionStorage","setItem","length","catch","alert","console","log","clear","children","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/ethan/Documents/codream_final/camperblic/src/main/frontend/src/pages/login/MyPage.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport axios from 'axios';\r\nimport RenderUserInformation from './RenderUserInformation';\r\nimport {Member, Order} from \"../../types\";\r\nimport {Simulate} from \"react-dom/test-utils\";\r\nimport error = Simulate.error;\r\nimport OrderList from \"./OrderList\";\r\nimport \"../../styles/loginStyles/MyPage.css\"\r\nimport {useNavigate} from \"react-router-dom\";\r\n\r\nconst MyPage = () => {\r\n    const history = useNavigate();\r\n    const [user, setUser] = useState<Member>({\r\n        userid: \"\",\r\n        name: \"\",\r\n        email: \"\",\r\n        phone: \"\",\r\n        address1: \"\",\r\n        address2: \"\",\r\n        address3: \"\",\r\n        address4: \"\",\r\n        createdDate: \"\",\r\n    });\r\n    const [orders, setOrders] = useState<Order[]>([]);\r\n    const [isUser, setIsUser] = useState<boolean>(false);\r\n    const [isUserOrder, setIsUserOrder] = useState<boolean>(false);\r\n    useEffect(() => {\r\n        // 유저 정보를 가져오는 API 호출\r\n        axios\r\n            .get('/mypage', {withCredentials: true})\r\n            .then((response) => {\r\n                if (response.status === 200) {\r\n                    const {member, orders} = response.data;\r\n                    setUser(member);\r\n                    setOrders(orders);\r\n                    sessionStorage.setItem(\"username\", member.name);\r\n                    if (member != null) {\r\n                        setIsUser(true);\r\n                    }\r\n                    if (orders.length > 0) {\r\n                        setIsUserOrder(true);\r\n                    }\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                if (error.response.status === 500) {\r\n                    alert(\"서버에 문제가 있습니다. 잠시만 기다려주세요.\");\r\n                    console.log(error.response.data);\r\n                    history(\"/\");\r\n                } else if (error.response.status === 423) {\r\n                    sessionStorage.clear();\r\n                    alert(\"사용자를 찾지 못했습니다. 로그인 상태를 확인해주세요.\");\r\n                    history(\"/login\")\r\n                }\r\n            });\r\n    }, []);\r\n\r\n    return (\r\n        <section>\r\n            <div className=\"mypageMainDiv\">\r\n                <div className={\"myPageComDiv\"}>\r\n                    {isUser && <RenderUserInformation user={user}/>}\r\n                    {isUserOrder && <OrderList orders={orders}/>}\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default MyPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}