{"ast":null,"code":"import _slicedToArray from\"/Users/ethan/Documents/codream_final/camperblic/src/main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useParams,useLocation,useNavigate}from'react-router-dom';import'../../styles/communityStyles/boardWrite.css';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BoardWrite=function BoardWrite(){var _useParams=useParams(),category=_useParams.category;var location=useLocation();var searchParams=new URLSearchParams(location.search);var editMode=searchParams.get('edit')==='true';var postId=searchParams.get('id');var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];var navigate=useNavigate();var sessionUserId=sessionStorage.getItem(\"userId\");useEffect(function(){if(editMode&&postId){axios.get(\"/boarddetail/\".concat(category,\"/\").concat(postId)).then(function(response){var postingDetail=response.data;setTitle(postingDetail.title);setName(postingDetail.name);setContent(postingDetail.content);}).catch(function(error){console.log('게시글을 가져오는 데 실패했습니다:',error);});}},[category,editMode,postId]);var handleTitleChange=function handleTitleChange(e){setTitle(e.target.value);};var handleNameChange=function handleNameChange(e){if(!editMode){setName(e.target.value);}};var handleContentChange=function handleContentChange(e){setContent(e.target.value);};var postData={title:title,name:sessionUserId,content:content};var handleFormSubmit=function handleFormSubmit(e){e.preventDefault();if(editMode&&postId){// 수정 모드인 경우 게시글 업데이트 로직 수행\naxios.put(\"/edit/\".concat(category,\"?id=\").concat(postId),postData).then(function(response){alert('게시글이 성공적으로 업데이트되었습니다.');navigate(\"/boarddetail/\".concat(category,\"/\").concat(postId));}).catch(function(error){alert('게시글 업데이트에 실패했습니다:'+error);});}else{// 새로운 게시글 등록 로직 수행\naxios.post(\"/write/\".concat(category),postData).then(function(response){alert('게시글이 성공적으로 등록되었습니다.');// const newPostId = response.data.postId;\nnavigate(\"/boarddetail/\".concat(category,\"/\").concat(response.data));// navigate(`/${category}`);\n}).catch(function(error){alert('게시글 등록에 실패했습니다:'+error);});}};var handleCancel=function handleCancel(){navigate(-1);};return/*#__PURE__*/_jsxs(\"section\",{className:\"writeOutterWrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"writeDecoTop\"}),/*#__PURE__*/_jsx(\"div\",{className:\"writeWrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"writeFormWrap\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"writeForm\",onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"formGroup\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",value:title,onChange:handleTitleChange,placeholder:\"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694.\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"formGroup\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"\\uC791\\uC131\\uC790\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",value:sessionUserId,placeholder:\"\\uC791\\uC131\\uC790\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694.\",disabled:editMode// Disable the input field in edit mode\n,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"formGroup\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"content\",children:\"\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"content\",value:content,onChange:handleContentChange,placeholder:\"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694.\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttonGroup\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:editMode?'수정':'등록'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCancel,children:\"\\uCDE8\\uC18C\"})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"writeDecoTop\"})]});};export default BoardWrite;","map":{"version":3,"names":["React","useState","useEffect","useParams","useLocation","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","BoardWrite","_useParams","category","location","searchParams","URLSearchParams","search","editMode","get","postId","_useState","_useState2","_slicedToArray","title","setTitle","_useState3","_useState4","name","setName","_useState5","_useState6","content","setContent","navigate","sessionUserId","sessionStorage","getItem","concat","then","response","postingDetail","data","catch","error","console","log","handleTitleChange","e","target","value","handleNameChange","handleContentChange","postData","handleFormSubmit","preventDefault","put","alert","post","handleCancel","className","children","onSubmit","htmlFor","type","id","onChange","placeholder","required","disabled","readOnly","onClick"],"sources":["/Users/ethan/Documents/codream_final/camperblic/src/main/frontend/src/pages/community/BoardWrite.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\nimport '../../styles/communityStyles/boardWrite.css';\nimport axios from 'axios';\n\nconst BoardWrite: React.FC = () => {\n    const { category } = useParams<{ category: string }>();\n    const location = useLocation();\n    const searchParams = new URLSearchParams(location.search);\n    const editMode = searchParams.get('edit') === 'true';\n    const postId = searchParams.get('id');\n    const [title, setTitle] = useState('');\n    const [name, setName] = useState('');\n    const [content, setContent] = useState('');\n    const navigate = useNavigate();\n    const sessionUserId:any = sessionStorage.getItem(\"userId\");\n\n    useEffect(() => {\n        if (editMode && postId) {\n            axios\n                .get(`/boarddetail/${category}/${postId}`)\n                .then((response) => {\n                    const postingDetail = response.data;\n                    setTitle(postingDetail.title);\n                    setName(postingDetail.name);\n                    setContent(postingDetail.content);\n                })\n                .catch((error) => {\n                    console.log('게시글을 가져오는 데 실패했습니다:', error);\n                });\n        }\n    }, [category, editMode, postId]);\n\n    const handleTitleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setTitle(e.target.value);\n    };\n\n    const handleNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (!editMode) {\n            setName(e.target.value);\n        }\n    };\n\n    const handleContentChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n        setContent(e.target.value);\n    };\n\n    const postData = {\n        title: title,\n        name: sessionUserId,\n        content: content,\n    };\n\n    const handleFormSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n\n        if (editMode && postId) {\n            // 수정 모드인 경우 게시글 업데이트 로직 수행\n            axios\n                .put(`/edit/${category}?id=${postId}`, postData)\n                .then((response) => {\n                    alert('게시글이 성공적으로 업데이트되었습니다.');\n                    navigate(`/boarddetail/${category}/${postId}`);\n                })\n                .catch((error) => {\n                    alert('게시글 업데이트에 실패했습니다:' + error);\n                });\n        } else {\n            // 새로운 게시글 등록 로직 수행\n            axios\n                .post(`/write/${category}`, postData)\n                .then((response) => {\n                    alert('게시글이 성공적으로 등록되었습니다.');\n                    // const newPostId = response.data.postId;\n                    navigate(`/boarddetail/${category}/${response.data}`);\n                    // navigate(`/${category}`);\n                })\n                .catch((error) => {\n                    alert('게시글 등록에 실패했습니다:' + error);\n                });\n        }\n    };\n\n    const handleCancel = () => {\n        navigate(-1);\n    };\n    return (\n        <section className=\"writeOutterWrap\">\n            <div className=\"writeDecoTop\"></div>\n            <div className=\"writeWrap\">\n                <div className=\"writeFormWrap\">\n                    <form className=\"writeForm\" onSubmit={handleFormSubmit}>\n                        <div className=\"formGroup\">\n                            <label htmlFor=\"title\">제목</label>\n                            <input\n                                type=\"text\"\n                                id=\"title\"\n                                value={title}\n                                onChange={handleTitleChange}\n                                placeholder=\"제목을 입력하세요.\"\n                                required\n                            />\n                        </div>\n                        <div className=\"formGroup\">\n                            <label htmlFor=\"name\">작성자</label>\n                            <input\n                                type=\"text\"\n                                id=\"name\"\n                                value={sessionUserId}\n                                placeholder=\"작성자를 입력하세요.\"\n                                disabled={editMode} // Disable the input field in edit mode\n                                readOnly\n                            />\n                        </div>\n                        <div className=\"formGroup\">\n                            <label htmlFor=\"content\">내용</label>\n                            <textarea\n                                id=\"content\"\n                                value={content}\n                                onChange={handleContentChange}\n                                placeholder=\"내용을 입력하세요.\"\n                                required\n                            ></textarea>\n                        </div>\n                        <div className=\"buttonGroup\">\n                            <button type=\"submit\">{editMode ? '수정' : '등록'}</button>\n                            <button type=\"button\" onClick={handleCancel}>\n                                취소\n                            </button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n            <div className=\"writeDecoTop\"></div>\n        </section>\n    );\n};\n\nexport default BoardWrite;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}