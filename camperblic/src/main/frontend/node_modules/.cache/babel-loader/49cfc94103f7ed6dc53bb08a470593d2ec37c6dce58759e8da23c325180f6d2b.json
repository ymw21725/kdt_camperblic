{"ast":null,"code":"import React from'react';import ReplyInputContainer from'./ReplyInputContainer';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var sessionUserId=sessionStorage.getItem(\"userId\");var idValidation=function idValidation(id){if(sessionUserId==\"admin\"||sessionUserId==id)return true;else return false;};function handleReplyEdit(){axios.put('/delete-replies',{params:{}}).then(function(response){alert(response.data);}).catch(function(error){alert('게시글 삭제에 실패했습니다:'+error);});}var _handleReplyDelete=function handleReplyDelete(category,id){axios.delete('/delete-replies',{params:{category:category,id:id}}).then(function(response){alert(response.data);window.location.reload();}).catch(function(error){alert('댓글 삭제에 실패했습니다:'+error);});};var CommentItem=function CommentItem(_ref){var category=_ref.category,comment=_ref.comment,isReplyVisible=_ref.isReplyVisible,replyInputCommentId=_ref.replyInputCommentId,commentInput=_ref.commentInput,handleCommentInputChange=_ref.handleCommentInputChange,handleReCommentInput=_ref.handleReCommentInput,handleReply=_ref.handleReply,handleReplyCommentSubmit=_ref.handleReplyCommentSubmit,isReplyInputVisible=_ref.isReplyInputVisible,setReplyInputVisible=_ref.setReplyInputVisible,replyList=_ref.replyList,setReplyList=_ref.setReplyList;var renderReplies=function renderReplies(replies){return replies.map(function(reply){return/*#__PURE__*/_jsx(ReplyItem,{category:category,comment:reply,handleReCommentInput:handleReCommentInput,handleReplyEdit:handleReplyEdit,handleReplyDelete:function handleReplyDelete(){return _handleReplyDelete(category,reply.id);}},reply.id);});};return/*#__PURE__*/_jsxs(\"li\",{className:\"replyOne\",children:[/*#__PURE__*/_jsx(\"p\",{children:comment.name}),/*#__PURE__*/_jsx(\"p\",{children:comment.createdate}),/*#__PURE__*/_jsx(\"p\",{children:comment.content}),/*#__PURE__*/_jsxs(\"div\",{className:\"replyButtons\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:comment.like_count}),/*#__PURE__*/_jsx(\"span\",{children:comment.dislike_count}),/*#__PURE__*/_jsx(\"span\",{className:\"replyButton\",onClick:function onClick(){return handleReCommentInput(comment.id);},children:\"\\uB2F5\\uAE00\"})]}),/*#__PURE__*/_jsx(\"div\",{children:idValidation(comment.name)&&/*#__PURE__*/_jsx(\"span\",{className:\"deleteButton\",onClick:function onClick(){return _handleReplyDelete(category,comment.id);},children:\"\\uC0AD\\uC81C\"})})]}),comment.reply_count>0&&/*#__PURE__*/_jsx(\"span\",{className:\"replyCountButton\",onClick:function onClick(){return handleReply(comment.id);},children:isReplyVisible?'답글 숨기기':\"\\uB2F5\\uAE00 \".concat(comment.reply_count,\"\\uAC1C\")}),replyInputCommentId===comment.id&&/*#__PURE__*/_jsx(ReplyInputContainer,{commentInput:commentInput,handleCommentInputChange:handleCommentInputChange,handleCommentSubmit:function handleCommentSubmit(){return handleReplyCommentSubmit(comment.id,commentInput,comment.tagname);},isVisible:isReplyInputVisible,setReplyInputVisible:setReplyInputVisible}),isReplyVisible&&/*#__PURE__*/_jsx(\"ul\",{className:\"replyList\",children:renderReplies(replyList)})]},comment.id);};var ReplyItem=function ReplyItem(_ref2){var category=_ref2.category,comment=_ref2.comment,handleReCommentInput=_ref2.handleReCommentInput,handleReplyEdit=_ref2.handleReplyEdit,handleReplyDelete=_ref2.handleReplyDelete;return/*#__PURE__*/_jsxs(\"li\",{className:\"replyOne rere\",children:[/*#__PURE__*/_jsx(\"p\",{children:comment.name}),/*#__PURE__*/_jsx(\"p\",{children:comment.createdate}),/*#__PURE__*/_jsx(\"p\",{children:comment.content}),/*#__PURE__*/_jsxs(\"div\",{className:\"replyButtons\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:comment.like_count}),/*#__PURE__*/_jsx(\"span\",{children:comment.dislike_count}),/*#__PURE__*/_jsx(\"span\",{className:\"replyButton\",onClick:function onClick(){return handleReCommentInput(comment.id);},children:\"\\uB2F5\\uAE00\"})]}),/*#__PURE__*/_jsx(\"div\",{children:idValidation(comment.name)&&/*#__PURE__*/_jsx(\"span\",{className:\"deleteButton\",onClick:function onClick(){handleReplyDelete(category,comment.id);},children:\"\\uC0AD\\uC81C\"})})]})]},comment.id);};export default CommentItem;","map":{"version":3,"names":["React","ReplyInputContainer","axios","jsx","_jsx","jsxs","_jsxs","sessionUserId","sessionStorage","getItem","idValidation","id","handleReplyEdit","put","params","then","response","alert","data","catch","error","handleReplyDelete","category","delete","window","location","reload","CommentItem","_ref","comment","isReplyVisible","replyInputCommentId","commentInput","handleCommentInputChange","handleReCommentInput","handleReply","handleReplyCommentSubmit","isReplyInputVisible","setReplyInputVisible","replyList","setReplyList","renderReplies","replies","map","reply","ReplyItem","className","children","name","createdate","content","like_count","dislike_count","onClick","reply_count","concat","handleCommentSubmit","tagname","isVisible","_ref2"],"sources":["/Users/ethan/Documents/codream_final/camperblic/src/main/frontend/src/pages/community/component/CommentItem.tsx"],"sourcesContent":["import React, {useState} from 'react';\nimport ReplyInputContainer from './ReplyInputContainer';\nimport { CommentOne } from '../../../types';\nimport axios from \"axios\";\n\nconst sessionUserId = sessionStorage.getItem(\"userId\");\nconst idValidation = (id: string):boolean => {\n    if(sessionUserId == \"admin\" || sessionUserId == id) return true;\n    else return false;\n}\n\nfunction handleReplyEdit() {\n    axios\n        .put('/delete-replies', {\n            params: {\n\n            },\n        })\n        .then((response) => {\n            alert(response.data);\n        })\n        .catch((error) => {\n            alert('게시글 삭제에 실패했습니다:' + error);\n        });\n}\n\nconst handleReplyDelete = (category: any, id: number) => {\n    axios\n        .delete('/delete-replies', {\n            params: {\n                category,\n                id\n            },\n        })\n        .then((response) => {\n            alert(response.data);\n            window.location.reload();\n        })\n        .catch((error) => {\n            alert('댓글 삭제에 실패했습니다:' + error);\n        });\n};\n\nconst CommentItem: React.FC<{\n    category: any;\n    comment: CommentOne;\n    isReplyVisible: boolean;\n    replyInputCommentId: number | null;\n    commentInput: string;\n    handleCommentInputChange: (event: React.ChangeEvent<HTMLTextAreaElement>) => void;\n    handleReCommentInput: (commentId: number) => void;\n    handleReply: (commentId: number) => void;\n    handleReplyCommentSubmit: (commentId: number, commentInput: string, commentTagName: string) => void;\n    isReplyInputVisible: boolean;\n    setReplyInputVisible: React.Dispatch<React.SetStateAction<boolean>>;\n    replyList: CommentOne[];\n    setReplyList: React.Dispatch<React.SetStateAction<{ [commentId: number]: CommentOne[] }>>; // 수정된 부분\n}> = ({\n          category,\n          comment,\n          isReplyVisible,\n          replyInputCommentId,\n          commentInput,\n          handleCommentInputChange,\n          handleReCommentInput,\n          handleReply,\n          handleReplyCommentSubmit,\n          isReplyInputVisible,\n          setReplyInputVisible,\n          replyList,\n          setReplyList,\n      }) => {\n\n\n\n    const renderReplies = (replies: CommentOne[]) => {\n        return replies.map((reply) => (\n            <ReplyItem\n                category={category}\n                key={reply.id}\n                comment={reply}\n                handleReCommentInput={handleReCommentInput}\n                handleReplyEdit={handleReplyEdit}\n                handleReplyDelete={() => handleReplyDelete(category, reply.id)}\n            />\n        ));\n    };\n\n    return (\n        <li className=\"replyOne\" key={comment.id}>\n            <p>{comment.name}</p>\n            <p>{comment.createdate}</p>\n            <p>{comment.content}</p>\n            <div className=\"replyButtons\">\n                <div>\n                    <span>{comment.like_count}</span>\n                    <span>{comment.dislike_count}</span>\n                    <span className=\"replyButton\" onClick={() => handleReCommentInput(comment.id)}>답글</span>\n                </div>\n                <div>\n                    {/*<span className=\"editButton\" onClick={handleReplyEdit}>수정</span>*/}\n                    {idValidation(comment.name) && <span className=\"deleteButton\" onClick={() => handleReplyDelete(category, comment.id)}>삭제</span>}\n                </div>\n            </div>\n            {comment.reply_count > 0 &&\n                <span className=\"replyCountButton\" onClick={() => handleReply(comment.id)}>\n                    {isReplyVisible ? '답글 숨기기' : `답글 ${comment.reply_count}개`}\n                </span>\n            }\n\n            {replyInputCommentId === comment.id && (\n                <ReplyInputContainer\n                    commentInput={commentInput}\n                    handleCommentInputChange={handleCommentInputChange}\n                    handleCommentSubmit={() => handleReplyCommentSubmit(comment.id, commentInput, comment.tagname)}\n                    isVisible={isReplyInputVisible}\n                    setReplyInputVisible={setReplyInputVisible}\n                />\n            )}\n            {isReplyVisible && <ul className=\"replyList\">{renderReplies(replyList)}</ul>}\n        </li>\n    );\n};\n\nconst ReplyItem: React.FC<{\n    category: any;\n    comment: CommentOne;\n    handleReCommentInput: (commentId: number) => void;\n    handleReplyEdit: () => void;\n    handleReplyDelete: (category: any, id: number) => void;\n}> = ({ category, comment, handleReCommentInput, handleReplyEdit, handleReplyDelete }) => {\n\n    return (\n        <li className=\"replyOne rere\" key={comment.id}>\n            <p>{comment.name}</p>\n            <p>{comment.createdate}</p>\n            <p>{comment.content}</p>\n            <div className=\"replyButtons\">\n                <div>\n                    <span>{comment.like_count}</span>\n                    <span>{comment.dislike_count}</span>\n                    <span className=\"replyButton\" onClick={() => handleReCommentInput(comment.id)}>답글</span>\n                </div>\n                <div>\n                    {/*<span className=\"editButton\" onClick={handleReplyEdit}>수정</span>*/}\n                    {idValidation(comment.name) && <span className=\"deleteButton\" onClick={() => {\n                        handleReplyDelete(category, comment.id);\n                    }}>삭제</span>}\n                </div>\n            </div>\n        </li>\n    );\n};\n\nexport default CommentItem;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}