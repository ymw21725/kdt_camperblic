{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ethan/Documents/codream_final/camperblic/src/main/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/ethan/Documents/codream_final/camperblic/src/main/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/ethan/Documents/codream_final/camperblic/src/main/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ethan/Documents/codream_final/camperblic/src/main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from\"axios\";import ItemLayOut from\"./ItemLayOut\";import{jsx as _jsx}from\"react/jsx-runtime\";var ItemAll=function ItemAll(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];// 현재 페이지 상태 추가\nvar fetchItems=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(page){var _yield$Promise$all,_yield$Promise$all2,cookResponse,etcResponse,matResponse,chairResponse,tentResponse,nextPageItems;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return Promise.all([axios.get(\"/cook?page=\".concat(page)),axios.get(\"/etc?page=\".concat(page)),axios.get(\"/mat?page=\".concat(page)),axios.get(\"/chair?page=\".concat(page)),axios.get(\"/tent?page=\".concat(page))]);case 4:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,5);cookResponse=_yield$Promise$all2[0];etcResponse=_yield$Promise$all2[1];matResponse=_yield$Promise$all2[2];chairResponse=_yield$Promise$all2[3];tentResponse=_yield$Promise$all2[4];nextPageItems=[].concat(_toConsumableArray(cookResponse.data),_toConsumableArray(etcResponse.data),_toConsumableArray(matResponse.data),_toConsumableArray(chairResponse.data),_toConsumableArray(tentResponse.data));setItems(function(prevItems){return[].concat(_toConsumableArray(prevItems),_toConsumableArray(nextPageItems));});_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](1);console.error('상품 가져오기 실패:',_context.t0);case 18:_context.prev=18;setIsLoading(false);return _context.finish(18);case 21:case\"end\":return _context.stop();}},_callee,null,[[1,15,18,21]]);}));return function fetchItems(_x){return _ref.apply(this,arguments);};}();var loadMoreItems=function loadMoreItems(){var nextPage=currentPage+1;// 다음 페이지 계산\nfetchItems(nextPage);setCurrentPage(nextPage);// 현재 페이지 업데이트\n};useEffect(function(){fetchItems(1);},[]);return/*#__PURE__*/_jsx(ItemLayOut,{items:items,topText:\"\\uC804\\uCCB4\\uC0C1\\uD488\",onLoadMore:loadMoreItems});};export default ItemAll;","map":{"version":3,"names":["React","useEffect","useState","axios","ItemLayOut","jsx","_jsx","ItemAll","_useState","_useState2","_slicedToArray","items","setItems","_useState3","_useState4","isLoading","setIsLoading","_useState5","_useState6","currentPage","setCurrentPage","fetchItems","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","page","_yield$Promise$all","_yield$Promise$all2","cookResponse","etcResponse","matResponse","chairResponse","tentResponse","nextPageItems","wrap","_callee$","_context","prev","next","Promise","all","get","concat","sent","_toConsumableArray","data","prevItems","t0","console","error","finish","stop","_x","apply","arguments","loadMoreItems","nextPage","topText","onLoadMore"],"sources":["/Users/ethan/Documents/codream_final/camperblic/src/main/frontend/src/pages/item/ItemAll.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Item } from \"../../types\";\nimport axios from \"axios\";\nimport ItemLayOut from \"./ItemLayOut\";\n\nconst ItemAll = () => {\n    const [items, setItems] = useState<Item[]>([]);\n    const [isLoading, setIsLoading] = useState(false);\n    const [currentPage, setCurrentPage] = useState(1); // 현재 페이지 상태 추가\n\n    const fetchItems = async (page: number) => {\n        setIsLoading(true);\n\n        try {\n            const [cookResponse, etcResponse, matResponse, chairResponse, tentResponse] = await Promise.all([\n                axios.get(`/cook?page=${page}`),\n                axios.get(`/etc?page=${page}`),\n                axios.get(`/mat?page=${page}`),\n                axios.get(`/chair?page=${page}`),\n                axios.get(`/tent?page=${page}`)\n            ]);\n\n            const nextPageItems = [\n                ...cookResponse.data,\n                ...etcResponse.data,\n                ...matResponse.data,\n                ...chairResponse.data,\n                ...tentResponse.data\n            ];\n\n            setItems(prevItems => [...prevItems, ...nextPageItems]);\n        } catch (error) {\n            console.error('상품 가져오기 실패:', error);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const loadMoreItems = () => {\n        const nextPage = currentPage + 1; // 다음 페이지 계산\n        fetchItems(nextPage);\n        setCurrentPage(nextPage); // 현재 페이지 업데이트\n    };\n\n    useEffect(() => {\n        fetchItems(1);\n    }, []);\n\n    return (\n        <ItemLayOut items={items} topText=\"전체상품\" onLoadMore={loadMoreItems} />\n    );\n};\n\n\nexport default ItemAll;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}